# API Сервис заказа товаров для розничных сетей

### Настройка
Для запуска сервиса, необходимо:
 - Клонировать репозиторий
  - Настроить _.env_ файл

```
docker compose up
```

Swagger-UI доступен после запуска проекта по адресу:
```
http://localhost:8080
```

<br>

**Для работы авторизации через ВК требуется:**

1) перейти на [страницу создания приложения ВК](https://vk.com/editapp?act=create)
2) создать приложение типа ___Сайт___
3) перейти на вкладку ___Настройки___
4) значение поля ___ID приложения___ задать переменной окружения `SOCIAL_AUTH_VK_OAUTH2_KEY` в файле _.env_
5) значение поля ___Защищённый ключ___ задать переменной окружения `SOCIAL_AUTH_VK_OAUTH2_SECRET` в файле _.env_

# Эндпоинты 
<br>

>## [Для покупателя](#buyer)
>## [Для продавца](#seller)

<br>

## <a name="buyer"></a>Для покупателя

# /login/vk-oauth2/
**_GET_** - авторизация/регистрация через ВК.


# /users/
**_GET_** - получить данные текущего пользователя.\
**_POST_** - зарегистрировать нового пользователя.\
**_PATCH_** - изменить данные текущего пользователя.


# /users/auth/
**_POST_** - авторизация по email и паролю (получить токен авторизации).


# /user/password_reset/
**_POST_** - отправить на почту запрос сброса пароля.


# /user/password_reset/confirm/
**_POST_** - сбросить пароль на новый.


# /user/contact/
**_GET_** - получить список всех контактов.\
**_POST_** - создать контакт.


# /user/contact/1/
**_GET_** - получить контакт с id равным 1.\
**_PATCH_** - изменить контакт с id равным 1.\
**_DELETE_** - удалить контакт с id равным 1.


# /shops/
**_GET_** - получить список всех магазинов.\
**_POST_** - создать магазин.


# /shops/1/
**_GET_** - получить магазин с id равным 1.\
**_PATCH_** - изменить магазин с id равным 1.


# /categories/
**_GET_** - получить список всех категорий товаров


# /categories/1/
**_GET_** - получить категорию с id равным 1.


# /products/
**_GET_** - Получить список всех товаров.


Доступна фильтрация товаров по:

`name` = наименование товара \
`shop` = название магазина \
`min_price` = минимальная цена товара\
`max_price` = максимальная цена товара\
`min_price_rrc` = минимальная рекомендованная цена товара\
`max_price_rrc` = максимальная рекомендованная цена \
`category` = категория товара \
`quantity` = количество товара \


# /products/1/
**_GET_** - получить товар с id равным 1.


# /basket/
**_GET_** - получить информацию о текущей корзине (если она есть).\
**_POST_** - добавить товар/изменить количество по id.\
**_DELETE_** - удалить из корзины товар(ы) с id из списка.


# /order/
**_GET_** - получить все заказы.\
**_POST_** - разместить заказ из корзины на предварительно созданный контакт.


# /order/1/
**_GET_** - получить свой заказ с id равным 1.


# /order/seller_order/1/
**_DELETE_** - полностью отменить заказ для магазина, где id заказа магазина равен 1.


## <a name="seller"></a>Для продавца


### /partner/products/import/
**_POST_** - импорт товаров в формате .yaml.

Требуется к запросу прикрепить файл в тело запроса, пример файла находится в **/app/data**.

**_GET_** - Проверить результат импорта товаров.



# /partner/products/
**_GET_** - получить список всех товаров своего магазина.\
`доступна фильтрация`

**_POST_** - создать товар.


# /partner/products/1/
**_GET_** - получить товар своего магазина с id товара равным 1.\
**_PATCH_** - изменить товар своего магазина с id товара равным 1\
**_DELETE_** - обнулить количество товара в наличии.


# /partner/state/
**_GET_** - получить текущий статус своего магазина.\
**_POST_** - изменить статус своего магазина.


# /partner/orders/
**_GET_** - получить список всех заказов своего магазина.


# /partner/orders/5/
**_GET_** - получить заказ своего магазина с id равным 5.\
**_PATCH_** - изменить заказ своего магазина с id равным 5.